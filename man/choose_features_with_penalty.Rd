% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/svmodt_penalised_feature.R
\name{choose_features_with_penalty}
\alias{choose_features_with_penalty}
\title{Select features with optional penalty for previously used features}
\usage{
choose_features_with_penalty(
  data,
  response,
  max_features,
  method = c("random", "mutual", "cor"),
  penalize_used = FALSE,
  penalty_weight = 0.5,
  used_features = character(0),
  verbose = FALSE
)
}
\arguments{
\item{data}{A data frame containing predictors and the response.}

\item{response}{Name of the response variable.}

\item{max_features}{Maximum number of features to select.}

\item{method}{Feature selection method; one of \code{"random"}, \code{"mutual"}, or \code{"cor"}.}

\item{penalize_used}{Logical; if \code{TRUE}, previously used features are penalized.}

\item{penalty_weight}{Numeric (0â€“0.99); fraction by which to reduce the score/weight of used features.}

\item{used_features}{Character vector of features previously used in the tree.}

\item{verbose}{Logical; if \code{TRUE}, prints information about penalties applied.}
}
\value{
Character vector of selected feature names.
}
\description{
Internal helper function to select a subset of features while optionally penalizing
features that have been used in ancestor nodes. Supports random selection,
mutual information, or correlation-based ranking.
}
\details{
- Penalized features have their selection weight or score reduced by multiplying by \code{(1 - penalty_weight)}.
- For \code{method = "random"}, the penalty reduces the probability of sampling a feature.
- For \code{method = "mutual"} or \code{"cor"}, the penalty reduces feature importance or correlation.
- If no valid features are available for correlation, the function falls back to random selection with penalty.
- Ensures that no feature is entirely excluded; \code{penalty_weight} is capped below 1.
}
\seealso{
\code{\link{choose_features}}, \code{\link{calculate_feature_associations}}
}
\keyword{internal}
